<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Happy Birthday, Aadya! ✨ — From Akki</title>
  <meta name="description" content="A magical birthday surprise website for Aadya — made with love by Akki.">
  <meta property="og:title" content="Happy Birthday, Aadya! ✨ — From Akki">
  <meta property="og:description" content="A magical birthday surprise website for Aadya — made with love by Akki.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="assets/cover.jpg"> <!-- TODO: Add a cute cover image -->
  <meta name="theme-color" content="#ff5fa2">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0e0f12;             /* dark base */
      --panel: rgba(255,255,255,0.06);
      --text: #e8e8ea;
      --muted: #b5b7c1;
      --accent: #ff5fa2;         /* rose */
      --accent-2: #ffd166;       /* gold */
      --ring: rgba(255,95,162,0.35);
      --glass: rgba(255,255,255,0.08);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --gradient: linear-gradient(120deg, #ff5fa2, #8b5dff 35%, #4cd2ff 70%, #ffd166);
    }
    [data-theme="light"]{
      --bg: #f9f7ff;
      --panel: rgba(0,0,0,0.05);
      --text: #1f2033;
      --muted: #5a5c75;
      --glass: rgba(255,255,255,0.65);
      --shadow: 0 10px 30px rgba(24,24,49,0.15);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Poppins,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text); background:radial-gradient(1200px 800px at 80% -10%, #2a1742, transparent 60%), var(--bg);
      overflow-x:hidden;
    }

    /* ---------- Global ---------- */
    .container{width:min(1100px, 92vw); margin:0 auto}
    .glass{
      background:var(--glass); backdrop-filter:saturate(1.2) blur(10px);
      box-shadow:var(--shadow); border:1px solid rgba(255,255,255,0.2); border-radius:18px;
    }
    .tag{
      display:inline-block; padding:.45rem .8rem; border-radius:999px;
      background:rgba(255,255,255,0.12); border:1px solid rgba(255,255,255,0.2);
      color:var(--text); font-size:.8rem; letter-spacing:.3px
    }
    .btn{
      --bgc: var(--accent); position:relative; display:inline-flex; align-items:center; gap:.6rem;
      padding:.95rem 1.2rem; border-radius:14px; border:0; color:white; font-weight:700;
      background:linear-gradient(135deg,var(--bgc), #ff87b9); cursor:pointer;
      box-shadow:0 12px 28px rgba(255,95,162,.35);
    }
    .btn.secondary{ --bgc:#6c7cff; box-shadow:0 12px 28px rgba(108,124,255,.35);}
    .btn:active{transform:translateY(1px)}
    .icon-btn{
      display:inline-grid; place-items:center; width:42px; height:42px; border-radius:12px;
      border:1px solid rgba(255,255,255,0.25); background:var(--panel); cursor:pointer; color:var(--text)
    }
    .hidden{display:none}

    /* ---------- Top Bar ---------- */
    .topbar{
      position:fixed; top:12px; left:50%; transform:translateX(-50%); z-index:40; width:min(1100px, 94vw);
      display:flex; align-items:center; justify-content:space-between; padding:.5rem .75rem; border-radius:16px; background:var(--glass); border:1px solid rgba(255,255,255,0.25);
    }
    .brand{display:flex; align-items:center; gap:.7rem}
    .brand-logo{
      width:36px; height:36px; border-radius:10px; background:var(--gradient); outline:2px solid rgba(255,255,255,0.2);
      box-shadow:0 5px 18px rgba(255,95,162,.25);
    }
    .brand h1{font:700 1rem Poppins, sans-serif; margin:0}
    .actions{display:flex; align-items:center; gap:.5rem}

    /* ---------- Hero ---------- */
    .hero{
      position:relative; min-height:100svh; display:grid; place-items:center; overflow:hidden;
    }
    .halo{
      position:absolute; inset:-20vh -20vw -20vh -20vw; z-index:0;
      background:
        radial-gradient(1000px 600px at 15% 20%, rgba(255,95,162,.20), transparent 60%),
        radial-gradient(900px 600px at 85% 10%, rgba(139,93,255,.18), transparent 60%),
        radial-gradient(1200px 700px at 50% 90%, rgba(76,210,255,.18), transparent 60%);
      filter:saturate(1.2) blur(2px);
      animation:haloShift 30s linear infinite;
    }
    @keyframes haloShift{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-10px)}
    }
    .hero-inner{position:relative; z-index:1; text-align:center; padding:120px 0 60px}
    .script{font-family:'Great Vibes', cursive; font-size:clamp(2.2rem,5vw,3.6rem); color:#ffd6ea; text-shadow:0 6px 24px rgba(255,95,162,.35); margin:.3rem 0}
    .name{
      font:800 clamp(2.6rem,9vw,6rem) Poppins, sans-serif; letter-spacing:1px; margin:.3rem 0 .7rem;
      background:var(--gradient); -webkit-background-clip:text; background-clip:text; color:transparent;
      position:relative;
    }
    .shine{
      position:absolute; inset:0; background:linear-gradient(120deg, transparent, rgba(255,255,255,.65), transparent);
      transform:translateX(-120%); animation:shine 4s ease-in-out 1.2s infinite;
      mix-blend-mode:overlay; filter:blur(.5px);
    }
    @keyframes shine{
      0%{transform:translateX(-120%)}
      40%,60%{transform:translateX(120%)}
      100%{transform:translateX(120%)}
    }
    .type{color:var(--muted); font-weight:600; letter-spacing:.4px; min-height:1.4em}

    .hero-cta{margin-top:1.3rem; display:flex; gap:.8rem; justify-content:center; flex-wrap:wrap}

    /* Balloons */
    .balloons{position:absolute; inset:0; pointer-events:none}
    .balloons span{
      position:absolute; font-size:clamp(28px, 5vw, 40px); filter:drop-shadow(0 8px 12px rgba(0,0,0,.18));
      animation:floatUp calc(8s + var(--d)*1s) linear infinite; opacity:.9
    }
    @keyframes floatUp{
      0%{transform:translateY(105vh) translateX(0)}
      100%{transform:translateY(-15vh) translateX(var(--x, 0))}
    }

    /* ---------- Sections ---------- */
    section{position:relative; padding:70px 0}
    .card-lg{padding:28px; border-radius:22px; border:1px solid rgba(255,255,255,0.2); background:var(--glass)}
    .split{display:grid; grid-template-columns:1.1fr .9fr; gap:26px}
    @media (max-width:900px){.split{grid-template-columns:1fr;}}
    .headline{font-size:clamp(1.6rem, 3.5vw, 2.1rem); margin:.4rem 0 1rem}
    .lead{color:var(--muted)}

    /* Gallery */
    .grid{display:grid; grid-template-columns:repeat(12,1fr); gap:14px}
    .item{grid-column: span 4; position:relative; border-radius:18px; overflow:hidden; aspect-ratio:1/1; background:#0d0e12; border:1px solid rgba(255,255,255,.15)}
    .item:nth-child(1){grid-column:span 8; aspect-ratio:16/9}
    .item:nth-child(4){grid-column:span 8; aspect-ratio:16/9}
    .item img{width:100%; height:100%; object-fit:cover; transform:scale(1.02); transition:transform .5s ease}
    .item:hover img{transform:scale(1.06)}
    .item::after{
      content:attr(data-caption); position:absolute; left:12px; bottom:12px; padding:.35rem .6rem; border-radius:10px;
      background:rgba(0,0,0,.35); color:#fff; font-size:.85rem; letter-spacing:.3px
    }

    /* Timeline */
    .timeline{position:relative; margin-top:6px}
    .timeline::before{content:""; position:absolute; left:10px; top:0; bottom:0; width:3px; background:linear-gradient(180deg, rgba(255,255,255,.3), transparent)}
    .step{display:grid; grid-template-columns:40px 1fr; gap:16px; padding:14px 0}
    .dot{
      width:20px; height:20px; border-radius:50%; margin-top:.25rem;
      background:conic-gradient(from 180deg, var(--accent), #8b5dff, #4cd2ff, var(--accent-2), var(--accent));
      outline:3px solid rgba(255,255,255,.15)
    }
    .step h4{margin:0 0 .2rem}
    .step p{margin:0; color:var(--muted)}

    /* Wish wall */
    .wall{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:14px}
    .flip{
      perspective:800px; height:180px
    }
    .flip-inner{
      position:relative; width:100%; height:100%; transform-style:preserve-3d; transition:transform .7s ease;
    }
    .flip:hover .flip-inner{transform:rotateY(180deg)}
    .front,.back{
      position:absolute; inset:0; display:grid; place-items:center; text-align:center; padding:16px;
      border-radius:16px; border:1px solid rgba(255,255,255,.18); background:var(--glass); backface-visibility:hidden
    }
    .back{transform:rotateY(180deg)}

    /* Footer */
    footer{padding:60px 0 90px; text-align:center; color:var(--muted)}
    .heart{display:inline-block; transform:translateY(.1em)}
    .heart::before{content:"❤"; background:linear-gradient(135deg,#ff5fa2,#ff87b9); -webkit-background-clip:text; color:transparent}

    /* Reveal on scroll */
    .reveal{opacity:0; transform:translateY(20px); transition:all .7s ease}
    .reveal.show{opacity:1; transform:none}

    /* Canvas layers */
    canvas#confetti, canvas#fx{
      position:fixed; inset:0; width:100vw; height:100vh; pointer-events:none; z-index:5;
    }
    canvas#fx{z-index:6}

    /* Toast */
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%) translateY(30px); opacity:0;
      padding:.7rem 1rem; border-radius:12px; background:rgba(0,0,0,.6); color:#fff; font-size:.9rem;
      transition:all .35s ease; z-index:50
    }
    .toast.show{transform:translateX(-50%) translateY(0); opacity:1}

    /* Tiny shimmer underline */
    .spark-underline{
      position:relative; display:inline-block
    }
    .spark-underline::after{
      content:""; position:absolute; left:0; right:0; bottom:-3px; height:2px;
      background:linear-gradient(90deg, transparent, #fff, transparent);
      opacity:.55; filter:blur(.4px)
    }

    /* Small screens padding fix for topbar */
    .spacer{height:78px}
  </style>
</head>
<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="brand">
      <div class="brand-logo" aria-hidden="true"></div>
      <h1>For <span class="spark-underline">Aadya</span> • 01 Oct 2025</h1>
    </div>
    <div class="actions">
      <button id="themeBtn" class="icon-btn" title="Toggle theme" aria-label="Toggle theme">🌙</button>
      <button id="musicBtn" class="icon-btn" title="Play music" aria-label="Play/pause music">🎵</button>
      <button id="shareBtn" class="icon-btn" title="Share" aria-label="Share this page">📤</button>
    </div>
  </div>
  <div class="spacer" aria-hidden="true"></div>

  <!-- Canvas effects -->
  <canvas id="confetti"></canvas>
  <canvas id="fx"></canvas>

  <!-- Hero -->
  <header class="hero">
    <div class="halo" aria-hidden="true"></div>
    <div class="balloons" aria-hidden="true" id="balloons"></div>

    <div class="hero-inner container">
      <div class="tag">From Prince Sharma</div>
      <div class="script">Happy Birthday</div>
      <h2 class="name">
        Aadya
        <span class="shine" aria-hidden="true"></span>
      </h2>
      <div class="type" id="typewriter" aria-live="polite"></div>

      <div class="hero-cta">
        <button class="btn" id="celebrateBtn">🎉 Celebrate!</button>
        <a href="#letter" class="btn secondary">💌 Open Your Letter</a>

      </div>
    </div>
  </header>

  <!-- Letter & Photo split -->
  <section id="letter">
    <div class="container split">
      <div class="card-lg reveal">
        <div class="tag">To: Aadya • From: Prince Sharma</div>
        <h3 class="headline">You make the ordinary feel <span style="background:var(--gradient);-webkit-background-clip:text;background-clip:text;color:transparent;">extraordinary</span> ✨</h3>
        <p class="lead">
          Happy Birthday, Aadya! On <strong>1 Oct 2025</strong>, the world gets a little brighter (and a lot more fun 😄).
          I’m so grateful for your smile, your kindness, and the million little moments that make life feel magical.
        </p>
        <p>
          May this year bring you adventures that make your heart race, laughter that makes your eyes sparkle,
          and peace that wraps you up like a warm hug. You’re truly one of a kind. 🫶
        </p>
        <p><em>— Always cheering for you, Sharma</em></p>
        <div style="margin-top:14px; display:flex; gap:8px; flex-wrap:wrap;">
          <span class="tag">#HappyBirthdayAadya</span>
          <span class="tag">#MadeByAkki</span>
          <span class="tag">#YouAreLoved</span>
        </div>
      </div>

      <div class="card-lg reveal" style="display:grid; place-items:center; overflow:hidden;">
        <!-- TODO: Replace with Aadya's photo(s) -->
        <figure style="width:100%; aspect-ratio:4/5; border-radius:16px; overflow:hidden; position:relative; border:1px solid rgba(255,255,255,.18)">
          <img src="https://i.postimg.cc/SRs85kXH/Screenshot-2025-09-30-225145.png" alt="Aadya portrait">

          <figcaption style="position:absolute; left:10px; bottom:10px; padding:.35rem .6rem; background:rgba(0,0,0,.35); border-radius:10px; color:#fff;">
            The brightest smile ☀️
          </figcaption>
        </figure>
        <!--<small class="lead" style="margin-top:10px; text-align:center">Tip: replace <code>assets/aadya-portrait.jpg</code> with your favorite photo.</small>-->
      </div>
    </div>
  </section>

  <!-- Gallery -->
  <section>
    <div class="container">
      <h3 class="headline reveal">Memory Gallery 📸</h3>
      <p class="lead reveal">A few snapshots of joy. (Add your photos to <code>assets/</code> and update the <code>src</code>.)</p>
      <div class="grid" style="margin-top:14px">
        <!-- TODO: Replace these with real images -->
        <div class="item reveal" data-caption="Forever friends">
          <img src="https://i.postimg.cc/sG51pnTY/Screenshot-2025-09-30-225158.png" alt="Aadya portrait">
        </div>
        <div class="item reveal" data-caption="Little adventures">
          <img src="https://i.postimg.cc/sG51pnTY/Screenshot-2025-09-30-225158.png" alt="Aadya portrait">

        </div>
        <div class="item reveal" data-caption="Sunset stories">
         <img src="https://i.postimg.cc/dZGD8W5m/Screenshot-2025-10-01-120530.png" alt="Aadya portrait">

        </div>
        <div class="item reveal" data-caption="Laughter & chai">
          <img src="https://i.postimg.cc/XqdZtqjf/Screenshot-2025-10-01-120703.png" alt="Aadya portrait">

        </div>
        <div class="item reveal" data-caption="Your radiance">
          <img src="https://i.postimg.cc/dZGD8W5j/Screenshot-2025-10-01-120502.png" alt="Aadya portrait">

        </div>
        <div class="item reveal" data-caption="A day to remember">
          <img src="https://i.postimg.cc/dZGD8W5m/Screenshot-2025-10-01-120530.png" alt="Aadya portrait">

        </div>
      </div>
    </div>
  </section>

  <!-- Timeline -->
  <section>
    <div class="container">
      <h3 class="headline reveal">Little Moments, Big Heart 💖</h3>
      <div class="timeline">
        <div class="step reveal">
          <div class="dot" aria-hidden="true"></div>
          <div>
            <h4>Day We Met</h4>
            <p>We didn’t know it then, but it was the start of something special.</p>
          </div>
        </div>
        <div class="step reveal">
          <div class="dot"></div>
          <div>
            <h4>Inside Jokes</h4>
            <p>Enough to fill a book (and make us laugh till it hurts).</p>
          </div>
        </div>
        <div class="step reveal">
          <div class="dot"></div>
          <div>
            <h4>Your Wins</h4>
            <p>I’m always proud of you — today and every day.</p>
          </div>
        </div>
        <div class="step reveal">
          <div class="dot"></div>
          <div>
            <h4>What’s Next</h4>
            <p>More memories, more joy, more “us”. Let’s go! 🚀</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Wish Wall -->
  <section>
    <div class="container">
      <h3 class="headline reveal">Wishes for You 🎁</h3>
      <div class="wall" style="margin-top:8px">
        <div class="flip reveal">
          <div class="flip-inner">
            <div class="front">A year full of sunshine ☀️</div>
            <div class="back">You deserve everything beautiful.</div>
          </div>
        </div>
        <div class="flip reveal">
          <div class="flip-inner">
            <div class="front">Adventures await ✈️</div>
            <div class="back">Let’s tick off that bucket list!</div>
          </div>
        </div>
        <div class="flip reveal">
          <div class="flip-inner">
            <div class="front">Health & peace 🌿</div>
            <div class="back">Take care of the amazing you.</div>
          </div>
        </div>
        <div class="flip reveal">
          <div class="flip-inner">
            <div class="front">Laughter & love 💞</div>
            <div class="back">More smiles, every single day.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      Made with <span class="heart"></span> by <strong>Akki</strong> • Happy Birthday, <strong>Aadya</strong>! ✨
      <div style="margin-top:10px">
        <button class="btn" id="scrollTopBtn">⬆️ Back to top</button>
      </div>
    </div>
  </footer>

  <!-- Audio (won't autoplay; user must tap Play) -->
  <!-- TODO: Put your favorite song at assets/song.mp3 -->
  <audio id="song" preload="none" src="https://cdn.pixabay.com/audio/2025/06/09/audio_50b8be7252.mp3"></audio>


  <div class="toast" id="toast">Link copied!</div>

  <script>
    /* ===============================
       CONFIG (easy customization)
    ================================ */
    const CONFIG = {
      celebrantName: "Aadya",
      hostName: "Akki",
      birthdayISO: "2025-10-01", // yyyy-mm-dd
      balloonEmojis: ["🎈","🎉","🎊","💖","🌸","⭐","🎀"],
      initConfetti: 200,
      palette: ["#ff5fa2","#8b5dff","#4cd2ff","#ffd166","#7ef7d6"]
    };

    /* ===============================
       Theme toggle
    ================================ */
    const themeBtn = document.getElementById('themeBtn');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedTheme = localStorage.getItem('theme');
    document.documentElement.setAttribute('data-theme', savedTheme || (prefersDark ? 'dark' : 'light'));
    themeBtn.textContent = (document.documentElement.getAttribute('data-theme') === 'dark') ? '🌞' : '🌙';
    themeBtn.addEventListener('click', () => {
      const cur = document.documentElement.getAttribute('data-theme');
      const next = cur === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      themeBtn.textContent = (next === 'dark') ? '🌞' : '🌙';
      toast(`Switched to ${next} theme`);
    });

    /* ===============================
       Typewriter lines
    ================================ */
    const lines = [
      `Happy Birthday, ${CONFIG.celebrantName}! 🎂`,
      "You are sunshine, stardust, and sparkles ✨",
      "Here’s to joy, growth, and great coffee ☕",
      "From Akki — always rooting for you 💫"
    ];
    const typeEl = document.getElementById('typewriter');
    let li = 0, ci = 0, deleting = false;
    function tick(){
      const line = lines[li];
      if(!deleting){
        ci++;
        typeEl.textContent = line.slice(0, ci);
        if(ci === line.length){ deleting = true; setTimeout(tick, 1400); return; }
        setTimeout(tick, 36 + Math.random()*50);
      } else {
        ci--;
        typeEl.textContent = line.slice(0, ci);
        if(ci === 0){ deleting = false; li = (li+1)%lines.length; setTimeout(tick, 400); return; }
        setTimeout(tick, 24 + Math.random()*40);
      }
    }
    tick();

    /* ===============================
       Balloons (CSS driven)
    ================================ */
    const balloons = document.getElementById('balloons');
    const W = () => window.innerWidth, H = () => window.innerHeight;
    function spawnBalloons(n=18){
      balloons.innerHTML = '';
      for(let i=0;i<n;i++){
        const s = document.createElement('span');
        s.textContent = CONFIG.balloonEmojis[Math.floor(Math.random()*CONFIG.balloonEmojis.length)];
        const left = Math.random()*100;
        const delay = Math.random()*10;
        const drift = (Math.random()*60 - 30) + 'px';
        s.style.left = left+'vw';
        s.style.setProperty('--d', delay.toFixed(2));
        s.style.setProperty('--x', drift);
        balloons.appendChild(s);
      }
    }
    spawnBalloons();
    window.addEventListener('resize', () => spawnBalloons());

    /* ===============================
       Confetti (canvas)
    ================================ */
    const confettiCanvas = document.getElementById('confetti');
    const ctx = confettiCanvas.getContext('2d');
    let cw, ch, confetti = [];
    function resizeCanvas(){
      cw = confettiCanvas.width = window.innerWidth * devicePixelRatio;
      ch = confettiCanvas.height = window.innerHeight * devicePixelRatio;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    function makeConfettiBurst(x=cw/2, y=ch/3, n=120, power=8){
      for(let i=0;i<n;i++){
        const angle = Math.random()*Math.PI*2;
        const speed = (Math.random()*power + power/2) * (devicePixelRatio);
        confetti.push({
          x, y,
          vx: Math.cos(angle)*speed,
          vy: Math.sin(angle)*speed - 3*devicePixelRatio,
          g: 0.12*devicePixelRatio,
          s: Math.random()*6*devicePixelRatio + 3*devicePixelRatio,
          c: CONFIG.palette[i%CONFIG.palette.length],
          a: 1,
          rot: Math.random()*Math.PI,
          vr: (Math.random()*0.2 - 0.1)
        });
      }
    }
    // Initial confetti
    makeConfettiBurst(cw/2, ch*0.25, CONFIG.initConfetti, 7);

    function confettiLoop(){
      ctx.clearRect(0,0,cw,ch);
      confetti = confetti.filter(p => p.a > 0 && p.y < ch+80*devicePixelRatio);
      for(const p of confetti){
        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        p.a -= 0.005;
        ctx.save();
        ctx.globalAlpha = Math.max(p.a, 0);
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = p.c;
        ctx.fillRect(-p.s/2, -p.s/2, p.s, p.s*0.6);
        ctx.restore();
      }
      requestAnimationFrame(confettiLoop);
    }
    confettiLoop();

    /* ===============================
       Fireworks on click (canvas)
    ================================ */
    const fxCanvas = document.getElementById('fx');
    const fctx = fxCanvas.getContext('2d');
    function resizeFx(){
      fxCanvas.width = window.innerWidth*devicePixelRatio;
      fxCanvas.height = window.innerHeight*devicePixelRatio;
    }
    resizeFx();
    window.addEventListener('resize', resizeFx);

    let sparks = [];
    function fireworks(x, y, n=80, colors=CONFIG.palette){
      for(let i=0;i<n;i++){
        const ang = Math.random()*Math.PI*2;
        const sp = (Math.random()*7+2) * devicePixelRatio;
        sparks.push({
          x, y, vx: Math.cos(ang)*sp, vy: Math.sin(ang)*sp,
          life: 1, color: colors[i%colors.length]
        });
      }
    }
    function fxLoop(){
      fctx.clearRect(0,0,fxCanvas.width, fxCanvas.height);
      sparks = sparks.filter(s => s.life>0.02);
      for(const s of sparks){
        s.x += s.vx; s.y += s.vy;
        s.vy += 0.04*devicePixelRatio;
        s.life *= 0.97;
        fctx.globalAlpha = s.life;
        fctx.fillStyle = s.color;
        fctx.beginPath();
        fctx.arc(s.x, s.y, 2.2*devicePixelRatio, 0, Math.PI*2);
        fctx.fill();
      }
      requestAnimationFrame(fxLoop);
    }
    fxLoop();

    // Celebrate button
    const celebrateBtn = document.getElementById('celebrateBtn');
    celebrateBtn.addEventListener('click', () => {
      makeConfettiBurst(cw/2, ch*0.28, 200, 9);
      fireworks(cw/2, ch*0.35);
      toast('Happy Birthday, ' + CONFIG.celebrantName + '! 🎉');
      vibrate([30, 20, 30]);
    });

    // Fireworks on click anywhere
    window.addEventListener('click', (e)=>{
      // Ignore UI buttons/links
      const tag = e.target.tagName.toLowerCase();
      if(['button','a','input','textarea','label'].includes(tag)) return;
      const x = (e.clientX)*devicePixelRatio;
      const y = (e.clientY)*devicePixelRatio;
      fireworks(x,y);
      makeConfettiBurst(x,y,80,6);
    });

    /* ===============================
       Reveal on scroll
    ================================ */
    const io = new IntersectionObserver((entries)=>{
      for(const ent of entries){
        if(ent.isIntersecting) ent.target.classList.add('show');
      }
    }, {threshold: .18});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    /* ===============================
       Music controls
    ================================ */
    const musicBtn = document.getElementById('musicBtn');
    const audio = document.getElementById('song');
    let playing = false;
    musicBtn.addEventListener('click', async ()=>{
      try{
        if(!playing){ await audio.play(); playing=true; musicBtn.textContent='⏸️'; toast('Playing your song 🎵'); }
        else { audio.pause(); playing=false; musicBtn.textContent='🎵'; }
      }catch(err){ toast('Add a song at assets/song.mp3 to play'); }
    });

    /* ===============================
       Share & copy link
    ================================ */
    const shareBtn = document.getElementById('shareBtn');
    shareBtn.addEventListener('click', async ()=>{
      const data = {
        title: document.title,
        text: `A birthday surprise for ${CONFIG.celebrantName} — from ${CONFIG.hostName}`,
        url: location.href
      };
      if(navigator.share){
        await navigator.share(data).catch(()=>{});
      } else {
        await navigator.clipboard.writeText(location.href);
        toast('Link copied!');
      }
    });

    /* ===============================
       Back to top
    ================================ */
    document.getElementById('scrollTopBtn').addEventListener('click', ()=>{
      window.scrollTo({top:0, behavior:'smooth'});
    });

    /* ===============================
       Toast helper & vibration
    ================================ */
    const toastEl = document.getElementById('toast');
    let toastTimer;
    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> toastEl.classList.remove('show'), 2200);
    }
    function vibrate(pattern){ if('vibrate' in navigator) navigator.vibrate(pattern); }

    /* ===============================
       Personalize title & heading from CONFIG
    ================================ */
    document.title = `Happy Birthday, ${CONFIG.celebrantName}! ✨ — From ${CONFIG.hostName}`;

    /* Bonus: tiny sparkle trail (lightweight) */
    let lastSpark = 0;
    window.addEventListener('pointermove', (e)=>{
      const now = performance.now();
      if(now - lastSpark < 28) return; lastSpark = now;
      const s = document.createElement('div');
      const size = 6 + Math.random()*6;
      s.style.position='fixed';
      s.style.left=(e.clientX - size/2)+'px';
      s.style.top=(e.clientY - size/2)+'px';
      s.style.width=size+'px'; s.style.height=size+'px';
      s.style.borderRadius='50%';
      s.style.pointerEvents='none';
      s.style.zIndex=20;
      s.style.background = CONFIG.palette[Math.floor(Math.random()*CONFIG.palette.length)];
      s.style.boxShadow='0 0 10px rgba(255,255,255,.6)';
      s.style.opacity='0.95';
      document.body.appendChild(s);
      const dy = -20 - Math.random()*30;
      s.animate([
        { transform:'translateY(0)', opacity:.95 },
        { transform:`translateY(${dy}px)`, opacity:0 }
      ], { duration: 600, easing:'ease-out' }).onfinish = ()=> s.remove();
    });

    /* Nice: greet if today is birthday */
    try{
      const today = new Date();
      const bday = new Date(CONFIG.birthdayISO + 'T00:00:00');
      if (today.toDateString() === bday.toDateString()) {
        setTimeout(()=> toast('It’s your day, Aadya! 🎂✨'), 1200);
      }
    }catch{}
  </script>
</body>
</html>
